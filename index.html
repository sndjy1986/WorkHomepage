<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect x=%2230%22 y=%2210%22 width=%2240%22 height=%2280%22 fill=%22%23FF0000%22/><rect x=%2210%22 y=%2230%22 width=%2280%22 height=%2240%22 fill=%22%23FF0000%22/></svg>">
    <script src="js/main.js"></script>
    <link rel="stylesheet" href="css/main.css">
    <title>Work Homepage</title>
<style>
    body {
        margin: 0;
        /* Adjusted padding to make space for the news ticker */
        padding-top: 50px; 
        background-image: url('background.jpg');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        transition: padding-top 0.3s ease, background-image 1s ease-in-out;
        background-repeat: no-repeat;
    }

    /* Added to handle positioning when the weather alert is active */
    body.alert-active {
        padding-top: 115px;
    }

    main {
        position: relative !important;
        background-color: rgba(0, 0, 0, 0.2); 
        backdrop-filter: blur(20px); 
        border-radius: 15px;
    }

    #greeting {
        text-align: center;
        font-size: 2.5em; 
        font-weight: bold;
        color: white;
        text-shadow: 2px 2px 4px #000000; 
        margin-bottom: -10px;
    }

    #dock ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        justify-content: center; 
        align-items: flex-end;
        height: 60px;
    }

    #dock li {
        margin: 0 10px; 
    }

    #dock li a {
        display: inline-block;
        transition: transform 0.2s ease-out;
    }

    #dock li img {
        width: 60px;
        height: 60px;
        vertical-align: middle;
    }

    #dock li a:hover {
        transform: scale(1.3) translateY(-10px);
    }

    :root {
        --text-color: ##f5f0f0;
        --link-color: #0066cc;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --text-color: #ffffff;
            --link-color: #66b3ff;
        }
        main {
             background-color: rgba(0, 0, 0, 0.2);
        }
    }
    
    /* CSS for the News Feed */
    #news-ticker {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 50px;
        background: #000;
        color: #fff;
        overflow: hidden;
        z-index: 9999;
        border-bottom: 2px solid #333;
        transition: top 0.3s ease;
    }
    
    body.alert-active #news-ticker {
        top: 55px;
    }

    #news-content {
    position: absolute;
    white-space: nowrap;
    line-height: 50px;
    font-size: 16px;
    font-weight: lighter;

    /* --- Changes for smoother animation --- */
    -webkit-transform: translateZ(0); /* Triggers GPU acceleration in WebKit browsers */
    backface-visibility: hidden;      /* Helps prevent flickering during animation */
    /* ------------------------------------ */
    
    /* Your existing animation properties */
    animation-name: scroll-left;
    animation-duration: 150s; /* Kept your 150s speed */
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    will-change: transform;
}

/* This part remains the same */
@keyframes scroll-left {
    0% {
        transform: translateX(100vw);
    }
    100% {
        transform: translateX(-100%);
    }
}
    @keyframes scroll-left {
        0% { transform: translateX(100vw); }
        100% { transform: translateX(-100%); }
    }
    #news-content a {
        color: #fff;
        text-decoration: none;
        margin-right: 80px;
    }
    #news-content a:hover {
        text-decoration: underline;
    }

</style>
</head>
<body>

    <div id="news-ticker">
        <div id="news-content">ðŸ”´ Loading RSS News Feed.......</div>
    </div>

    <div id="weather-alert"></div>

    <main>
        <header>
            <section id="date-time">
                <h2 class="sr-only">Date & Time</h2>
            </section>
            <section id="weather">
                <h2 class="sr-only">Location & Weather</h2>
            </section>
        </header>
        <section id="traichu">
            <h1 class="sr-only">Joey's Homepage</h1>

            <div id="greeting"></div>

            <nav id="dock">
                <ul>
                    <li><a href="https://vanguard.emsanyware.com/" title="Vanguard"><img src="https://raw.githubusercontent.com/sndjy1986/windows-98/refs/heads/main/icons/emsanyware.JPG" alt="Vanguard"></a></li>
                    <li><a href="https://scheduling.esosuite.net/Default.aspx?DB=priorityambulance" title="ESO Suite"><img src="https://raw.githubusercontent.com/sndjy1986/windows-98/refs/heads/main/icons/esoicon.png" alt="ESO Suite"></a></li>
                    <li><a href="https://andersoncounty911_sc.transport.net/#/login" title="Med-Trans Helo"><img src="https://icons.duckduckgo.com/ip3/med-trans.net.ico" alt="Google Drive"></a></li>
                    <li><a href="https://docs.google.com/spreadsheets/d/1H6C59UoF_g1QHSutXQCqBUUhfW4r2rLoNaTe0ZRQYSw/edit?gid=0#gid=0" title="Shift Report"><img src="https://icons.duckduckgo.com/ip3/drive.google.com.ico" alt="GitHub"</a></li>
                    <li><a href="https://login.microsoftonline.com/" title="Work E-Mail"><img src="https://icons.duckduckgo.com/ip3/outlook.com.ico" alt="Work E-Mail Login"</a></li>
                    <li><a href="https://www.paycomonline.net/v4/ee/web.php/app/login" title="PayCom Online"><img src="https://icons.duckduckgo.com/ip3/paycomonline.net.ico" alt="PayCom Online"</a></li>
                    <li><a href="https://work.sndjy.us/camera" title="2X2 DOT Camera"><img src="https://raw.githubusercontent.com/sndjy1986/WorkHomepage/refs/heads/main/Camera.png" alt="Camera's"></a></li>
                </ul>
            </nav>

            <section id="search">
                <h2 class="sr-only">Search</h2>
                <form action="https://www.google.com/search" method="get">
                    <div class="search-container">
                        <input type="text" id="q" name="q" placeholder="Search..." autofocus>
                        <button type="submit" aria-label="Search"></button>
                    </div>
                </form>
            </section>
            <section id="bookmarks">
                <h2 class="sr-only">Bookmarks</h2>
                <ul>
                    <li><a href="https://docs.google.com/spreadsheets/d/1H6C59UoF_g1QHSutXQCqBUUhfW4r2rLoNaTe0ZRQYSw/edit?usp=sharing" target="_blank"><img src="https://icons.duckduckgo.com/ip3/drive.google.com.ico" class="favicon" alt="Daily WorkSheet">Daily WorkSheet</a></li>
                    <li><a href="https://truck-5c2f62a8549e.herokuapp.com/" target="_blank"><img src="https://raw.githubusercontent.com/sndjy1986/windows-98/refs/heads/main/icons/network_normal_two_pcs.ico" class="favicon" alt="ESO">Dispatch Timers</a></li>
                    <li><a href="https://drive.google.com/file/d/1i2Pybwtw5h-tDiBGzM1QLVQumYZx0Ubz/view?usp=drive_link" target="_blank"><img src="https://icons.duckduckgo.com/ip3/dead.net.ico" class="favicon" alt="Coroner Schedule">Coroner Schedule</a></li>
                    <li><a href="https://amm04.airlink.com/sierrawireless/" target="_blank"><img src="https://raw.githubusercontent.com/sndjy1986/windows-98/refs/heads/main/icons/desktop_w95.ico" alt="Truck Tracking">Sierra Wireless</a></li>
                    <li><a href="https://anmed.org/sites/default/files/2024-08/anmed-north-campus-map-v5.pdf" target="_blank"><img src="https://icons.duckduckgo.com/ip3/anmed.org.ico" alt="Truck Tracking">North Campus Map</a></li>
                     </ul>
                <ul>
                    <li><a href="http://www.google.com/voice" target="_blank"><img src="https://icons.duckduckgo.com/ip3/voice.google.com.ico" alt="Truck Tracking">Google Voice</a></li>
                    <li><a href="https://learn.emergencydispatch.org/academy/my_learning/dashboard" target="_blank"><img src="https://icons.duckduckgo.com/ip3/emergencydispatch.org.ico" class="favicon" alt="EMD Training">PRO-QA Class</a></li>
                    <li><a href="https://forms.microsoft.com/pages/responsepage.aspx?id=Zh-exeJVn0SAfe_1FF9Zi2FaRW6gaHhKjeF02t2Aq8tURFAwVDVVUEVVRzZRODNTNkgyUFJNMDBHSS4u" target="_blank"><img src="https://raw.githubusercontent.com/sndjy1986/windows-98/refs/heads/main/icons/ram_drive.ico" class="favicon" alt="Daily WorkSheet">Daily Truck Form</a></li>
                    <li><a href="https://support.priorityambulance.com/login" target="_blank"><img src="https://icons.duckduckgo.com/ip3/sndjy.us.com.ico" class="favicon" alt="Priority Support">Work Support</a></li>
                    <li><a href="https://www.511sc.org/#zoom=11.546860821896603&lon=-82.55557766187724&lat=34.58726185125286&dmsg&rest&cams&other&cong&wthr&acon&incd&trfc" target="_blank"><img src="https://icons.duckduckgo.com/ip3/511sc.org.ico" class="favicon" alt="DOT Cameras">DOT Cams</a></li>
                    </li>
                </ul>
            </section>
        </section>
        <section id="word-of-the-day">
            <h2 class="sr-only">Word of the Day</h2>
            <div id="word-container">
                <h3 id="word-title"></h3>
                <p id="word-definition"></p>
            </div>
        </section>
    </main>


<script>
    /**
     * Sets a random greeting based on the time of day.
     */
    function setGreeting() {
        const greetingElement = document.getElementById('greeting');
        const currentHour = new Date().getHours();
        
        const morningGreetings = [
            'Good Morning!', 'Rise and Shine!', 'You\'ve been summoned.', 'Let\'s get this bread.', 'Time to make the donuts.', 'I don\'t like morning people, or mornings, or people.'
        ];
        const afternoonGreetings = [
            'Good Afternoon.', 'Is it 5 o\'clock yet?', 'Surviving another day!', 'Keep up the great work!', 'Remember that to-do list? It misses you.'
        ];
        const eveningGreetings = [
            'Good Evening.', 'Time to unwind.', 'The day is over. You can stop pretending to work now.', 'Time to start your real life.', 'May your Wi-Fi be strong and your snacks plentiful.'
        ];

        let greetingText = '';

        if (currentHour < 12) {
            greetingText = morningGreetings[Math.floor(Math.random() * morningGreetings.length)];
        } else if (currentHour < 18) {
            greetingText = afternoonGreetings[Math.floor(Math.random() * afternoonGreetings.length)];
        } else {
            greetingText = eveningGreetings[Math.floor(Math.random() * eveningGreetings.length)];
        }
        greetingElement.textContent = greetingText;
    }

    /**
     * Sets a random background image.
     */
    function setRandomBackground() {
        const backgrounds = [ 'background.jpg', 'Background2.jpg', 'LIFEFLIGHT.png', 'background4.jpg', 'background5.jpg', 'xmas.jpg' ];
        const randomIndex = Math.floor(Math.random() * backgrounds.length);
        document.body.style.backgroundImage = `url('${backgrounds[randomIndex]}')`;
    }

    /**
     * Fetches and displays the Fox News RSS feed.
     */
    function loadNewsFeed() {
        const newsContent = document.getElementById('news-content');
        const cacheKey = 'foxNewsFeedCache';
        const cacheDuration = 15 * 60 * 1000; // 15 minutes

        const cachedData = localStorage.getItem(cacheKey);
        if (cachedData) {
            const { html, timestamp } = JSON.parse(cachedData);
            if (Date.now() - timestamp < cacheDuration) {
                newsContent.innerHTML = html;
                return;
            }
        }

        fetch('https://moxie.foxnews.com/google-publisher/latest.xml')
        .then(response => response.text())
        .then(str => new DOMParser().parseFromString(str, "application/xml"))
        .then(data => {
            const items = data.querySelectorAll("item");
            let html = '';
            items.forEach(item => {
                const title = item.querySelector("title").textContent;
                const link = item.querySelector("link").textContent;
                html += `<a href="${link}" target="_blank">ðŸ¦Š ${title}</a>`;
            });
            if (html === '') { throw new Error('No items found in RSS feed.'); }
            newsContent.innerHTML = html;
            const dataToCache = { html: html, timestamp: Date.now() };
            localStorage.setItem(cacheKey, JSON.stringify(dataToCache));
        })
        .catch(error => {
            console.error('Error fetching or parsing RSS feed:', error);
            newsContent.innerHTML = 'ðŸ¦Š Unable to load news feed. Please check back later. ðŸ¦Š';
        });
    }

    /**
     * Fetches and displays the Word of the Day from Wordsmith.
     */
    function loadWordOfTheDay() {
        const wordTitle = document.getElementById('word-title');
        const wordDefinition = document.getElementById('word-definition');
        const cacheKey = 'wordOfTheDayCache';
        const cacheDuration = 24 * 60 * 60 * 1000; // 24 hours

        const cachedData = localStorage.getItem(cacheKey);
        if (cachedData) {
            const { word, definition, timestamp } = JSON.parse(cachedData);
            if (Date.now() - timestamp < cacheDuration) {
                wordTitle.textContent = word;
                wordDefinition.textContent = definition;
                return;
            }
        }

        // Using a more reliable CORS proxy
        const feedUrl = 'https://wordsmith.org/awad/rss1.xml';
        fetch(`https://api.allorigins.win/raw?url=${encodeURIComponent(feedUrl)}`)
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok for Word of the Day.');
            }
            return response.text();
        })
        .then(str => new DOMParser().parseFromString(str, "application/xml"))
        .then(data => {
            const item = data.querySelector("item");
            if (!item) {
                throw new Error('RSS item not found in Wordsmith feed.');
            }
            const title = item.querySelector("title").textContent;
            const description = item.querySelector("description").textContent;
            const definition = description.split('<br>')[0].trim();

            wordTitle.textContent = title;
            wordDefinition.textContent = definition;

            const dataToCache = { word: title, definition: definition, timestamp: Date.now() };
            localStorage.setItem(cacheKey, JSON.stringify(dataToCache));
        })
        .catch(error => {
            console.error('Error fetching Word of the Day:', error);
            wordTitle.textContent = 'Word of the Day';
            wordDefinition.textContent = 'Could not load the word of the day.';
        });
    }

    /**
     * Runs all startup functions after the page is loaded.
     */
    document.addEventListener('DOMContentLoaded', () => {
        // Run once on load
        setGreeting();
        setRandomBackground();
        loadNewsFeed();
        

        // Set an interval to refresh the news feed periodically
        setInterval(loadNewsFeed, 900000); // 15 minutes
    });
</script>
    </body>
</html>
